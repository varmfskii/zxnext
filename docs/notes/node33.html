
<H2><A NAME="SECTION00351000000000000000">
Programming</A>
</H2>

<P>
Port $123b (4667) Layer 2
<table width="90%">
  <tr><td align="right" valign="top"><#5285#><#5281#><#5281#><#5285#></td><td valign="top">&nbsp;bits 6-7: Video RAM bank select
  </td></tr>
<tr><td align="right" valign="top"><#5286#><#5282#><#5282#><#5286#></td><td valign="top">&nbsp;bit 3: Shadow layer 2 select
  </td></tr>
<tr><td align="right" valign="top"><#5287#><#5283#><#5283#><#5287#></td><td valign="top">&nbsp;bit 1: Layer 2 visible
  </td></tr>
<tr><td align="right" valign="top"><#5288#><#5284#><#5284#><#5288#></td><td valign="top">&nbsp;bit 0: Enable layer 2 write paging
</td></tr></table>


<P>
For information on controlling the palette see the Palette section.

<P>
<A NAME="425"><tex2html_anchor_invisible_mark></A>
(R/W) $14 (20) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline504#</SPAN> Global transparency color
<table width="90%"><tr><td align="right" valign="top"><#5291#><#5290#><#5290#><#5291#></td><td valign="top">&nbsp;bits 7-0 = Transparency color value ($E3 after a reset)
</td></tr></table>

(Note: this value is 8-bit, so the transparency is compared against
only by the MSB bits of the final 9-bit colour)
<BR>(Note2: this only affects Layer 2, ULA and LoRes. Sprites use register
$4B for transparency and tilemap uses nextreg $4C)

<P>
<A NAME="428"><tex2html_anchor_invisible_mark></A>
(R/W) $16 (22) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline506#</SPAN> Layer2 Offset X
<table width="90%"><tr><td align="right" valign="top"><#5294#><#5293#><#5293#><#5294#></td><td valign="top">&nbsp;bits 7-0 = X Offset (0-255)(0 after a reset)
</td></tr></table>


<P>
(R/W) $17 (23) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline508#</SPAN> Layer2 Offset Y
<table width="90%"><tr><td align="right" valign="top"><#5297#><#5296#><#5296#><#5297#></td><td valign="top">&nbsp;bits 7-0 = Y Offset (0-191)(0 after a reset)
</td></tr></table>


<P>
<A NAME="433"><tex2html_anchor_invisible_mark></A>
(R/W) $18 (24) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline510#</SPAN> Clip Window Layer 2
<table width="90%"><tr><td align="right" valign="top"><#5312#><#5299#><#5299#><#5312#></td><td valign="top">&nbsp;bits 7-0 = Coords of the clip window
  <table width="90%">  <tr><td align="right" valign="top"><#5308#><#5304#><#5300#><#5300#><#5304#><#5308#></td><td valign="top">&nbsp;1st write - X1 position
  </td></tr>
<tr><td align="right" valign="top"><#5309#><#5305#><#5301#><#5301#><#5305#><#5309#></td><td valign="top">&nbsp;2nd write - X2 position
  </td></tr>
<tr><td align="right" valign="top"><#5310#><#5306#><#5302#><#5302#><#5306#><#5310#></td><td valign="top">&nbsp;3rd write - Y1 position
  </td></tr>
<tr><td align="right" valign="top"><#5311#><#5307#><#5303#><#5303#><#5307#><#5311#></td><td valign="top">&nbsp;4rd write - Y2 position
  </td></tr></table>
</td></tr></table>

Reads do not advance the clip position
<BR>The values are 0,255,0,191 after a Reset

<P>
(W) $1C (28) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline512#</SPAN> Clip Window control
<table width="90%"><tr><td align="right" valign="top"><#5319#><#5314#><#5314#><#5319#></td><td valign="top">&nbsp;bits 7-4 = Reserved, must be 0</td></tr>
<tr><td align="right" valign="top"><#5320#><#5315#><#5315#><#5320#></td><td valign="top">&nbsp;bit 3 - reset the tilemap clip index</td></tr>
<tr><td align="right" valign="top"><#5321#><#5316#><#5316#><#5321#></td><td valign="top">&nbsp;bit 2 - reset the ULA/LoRes clip index.</td></tr>
<tr><td align="right" valign="top"><#5322#><#5317#><#5317#><#5322#></td><td valign="top">&nbsp;bit 1 - reset the sprite clip index.</td></tr>
<tr><td align="right" valign="top"><#5323#><#5318#><#5318#><#5323#></td><td valign="top">&nbsp;bit 0 - reset the Layer 2 clip index.
</td></tr></table>


<P>
(R) $1C (28) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline514#</SPAN> Clip Window control
<BR>(may change)
<table width="90%"><tr><td align="right" valign="top"><#5329#><#5325#><#5325#><#5329#></td><td valign="top">&nbsp;bits 7-6 = Tilemap clip index</td></tr>
<tr><td align="right" valign="top"><#5330#><#5326#><#5326#><#5330#></td><td valign="top">&nbsp;bits 5-4 = Layer 2 clip index</td></tr>
<tr><td align="right" valign="top"><#5331#><#5327#><#5327#><#5331#></td><td valign="top">&nbsp;bits 3-2 = Sprite clip index</td></tr>
<tr><td align="right" valign="top"><#5332#><#5328#><#5328#><#5332#></td><td valign="top">&nbsp;bits 1-0 = ULA clip index
</td></tr></table>


<P>
(R/W) $12 (18) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline516#</SPAN> Layer 2 RAM bank
<table width="90%"><tr><td align="right" valign="top"><#5336#><#5334#><#5334#><#5336#></td><td valign="top">&nbsp;bits 7-6 = Reserved, must be 0</td></tr>
<tr><td align="right" valign="top"><#5337#><#5335#><#5335#><#5337#></td><td valign="top">&nbsp;bits 5-0 = RAM bank (point to bank 8 after a Reset, NextZXOS
  modifies to 9)
</td></tr></table>


<P>
(R/W) $13 (19) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline518#</SPAN> Layer 2 RAM shadow bank
<table width="90%"><tr><td align="right" valign="top"><#5341#><#5339#><#5339#><#5341#></td><td valign="top">&nbsp;bits 7-6 = Reserved, must be 0</td></tr>
<tr><td align="right" valign="top"><#5342#><#5340#><#5340#><#5342#></td><td valign="top">&nbsp;bits 5-0 = RAM bank (point to bank 11 after a Reset, NextZXOS
  modifies to 12)
</td></tr></table>


<P>
<tex2html_file>#./video/sprites.tex#
