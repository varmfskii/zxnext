
<H4><A NAME="SECTION00320010000000000000">
ULANext Colour Palette</A>
</H4>
Each video mode group has a pair of palettes assigned to it a primary
and an alternate palette.

<P>
(R/W) $43 (67) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline148#</SPAN> Palette Control
<table width="90%"><tr><td align="right" valign="top"><#4892#><#4862#><#4862#><#4892#></td><td valign="top">&nbsp;bit 7 = '1' to disable palette write auto-increment.</td></tr>
<tr><td align="right" valign="top"><#4893#><#4863#><#4863#><#4893#></td><td valign="top">&nbsp;bits 6-4 = Select palette for reading or writing:
  <table width="90%">  <tr><td align="right" valign="top"><#4884#><#4876#><#4864#><#4864#><#4876#><#4884#></td><td valign="top">&nbsp;000 = ULA first palette
  </td></tr>
<tr><td align="right" valign="top"><#4885#><#4877#><#4865#><#4865#><#4877#><#4885#></td><td valign="top">&nbsp;100 = ULA second palette
  </td></tr>
<tr><td align="right" valign="top"><#4886#><#4878#><#4866#><#4866#><#4878#><#4886#></td><td valign="top">&nbsp;001 = Layer 2 first palette
  </td></tr>
<tr><td align="right" valign="top"><#4887#><#4879#><#4867#><#4867#><#4879#><#4887#></td><td valign="top">&nbsp;101 = Layer 2 second palette
  </td></tr>
<tr><td align="right" valign="top"><#4888#><#4880#><#4868#><#4868#><#4880#><#4888#></td><td valign="top">&nbsp;010 = Sprites first palette
  </td></tr>
<tr><td align="right" valign="top"><#4889#><#4881#><#4869#><#4869#><#4881#><#4889#></td><td valign="top">&nbsp;110 = Sprites second palette
  </td></tr>
<tr><td align="right" valign="top"><#4890#><#4882#><#4870#><#4870#><#4882#><#4890#></td><td valign="top">&nbsp;011 = Tilemap first palette
  </td></tr>
<tr><td align="right" valign="top"><#4891#><#4883#><#4871#><#4871#><#4883#><#4891#></td><td valign="top">&nbsp;111 = Tilemap second palette
  </td></tr></table>
</td></tr>
<tr><td align="right" valign="top"><#4894#><#4872#><#4872#><#4894#></td><td valign="top">&nbsp;bit 3 = Select Sprites palette (0 = first palette, 1 = second palette)</td></tr>
<tr><td align="right" valign="top"><#4895#><#4873#><#4873#><#4895#></td><td valign="top">&nbsp;bit 2 = Select Layer 2 palette (0 = first palette, 1 = second palette)</td></tr>
<tr><td align="right" valign="top"><#4896#><#4874#><#4874#><#4896#></td><td valign="top">&nbsp;bit 1 = Select ULA palette (0 = first palette, 1 = second palette)</td></tr>
<tr><td align="right" valign="top"><#4897#><#4875#><#4875#><#4897#></td><td valign="top">&nbsp;bit 0 = Enable ULANext mode if 1. (0 after a reset)
</td></tr></table>


<P>
(R/W) $40 (64) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline150#</SPAN> Palette Index
<table width="90%"><tr><td align="right" valign="top"><#4900#><#4899#><#4899#><#4900#></td><td valign="top">&nbsp;bits 7-0 = Select the palette index to change the associated colour.
</td></tr></table>

For the ULA only, INKs are mapped to indices 0-7, Bright INKS to
indices 8-15, PAPERs to indices 16-23 and Bright PAPERs to indices
24-31.
<BR>In ULANext mode, INKs come from a subset of indices 0-127 and PAPERs
come from a subset of indices 128-255. The number of active indices
depends on the number of attribute bits assigned to INK and PAPER out
of the attribute byte.  The ULA always takes border colour from paper.

<P>
(R/W) $41 (65) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline152#</SPAN> Palette Value (8 bit colour)
<table width="90%"><tr><td align="right" valign="top"><#4903#><#4902#><#4902#><#4903#></td><td valign="top">&nbsp;bits 7-0 = Colour for the palette index selected by the register $40.
</td></tr></table>

(Format is RRRGGGBB - the lower blue bit of the 9-bit colour will be a
logical OR of blue bits 1 and 0 of this 8-bit value.)
<BR>After the write, the palette index is auto-incremented to the next
index if the auto-increment is enabled at reg $43. Reads do not
auto-increment.

<P>
(R/W) $44 (68) <SPAN CLASS="MATH"><tex2html_image_mark>#tex2html_wrap_inline154#</SPAN> Palette Value (9 bit colour)
<BR>Two consecutive writes are needed to write the 9 bit colour
<table width="90%"><tr><td align="right" valign="top"><#4925#><#4905#><#4905#><#4925#></td><td valign="top">&nbsp;1st write:
  <table width="90%">  <tr><td align="right" valign="top"><#4914#><#4913#><#4906#><#4906#><#4913#><#4914#></td><td valign="top">&nbsp;bits 7-0 = RRRGGGBB
  </td></tr></table>
</td></tr>
<tr><td align="right" valign="top"><#4926#><#4907#><#4907#><#4926#></td><td valign="top">&nbsp;2nd write.
  If writing a L2 palette
<BR>  <table width="90%">  <tr><td align="right" valign="top"><#4918#><#4915#><#4908#><#4908#><#4915#><#4918#></td><td valign="top">&nbsp;bit 7 = 1 for L2 priority colour, 0 for normal
<BR>    Priority colour will always be on top even on an SLU priority
    arrangement. If you need the exact same colour on priority and non
    priority locations you will need to program the same colour twice
    changing bit 7 to 0 for the second colour
  </td></tr>
<tr><td align="right" valign="top"><#4919#><#4916#><#4909#><#4909#><#4916#><#4919#></td><td valign="top">&nbsp;bits 6-1 = Reserved, must be 0
  </td></tr>
<tr><td align="right" valign="top"><#4920#><#4917#><#4910#><#4910#><#4917#><#4920#></td><td valign="top">&nbsp;bit 0 = lsb B
  </td></tr></table>

  If writing another palette
  <table width="90%">  <tr><td align="right" valign="top"><#4923#><#4921#><#4911#><#4911#><#4921#><#4923#></td><td valign="top">&nbsp;bits 7-1 = Reserved, must be 0
  </td></tr>
<tr><td align="right" valign="top"><#4924#><#4922#><#4912#><#4912#><#4922#><#4924#></td><td valign="top">&nbsp;bit 0 = lsb B
  </td></tr></table>
</td></tr></table>

After the two consecutive writes the palette index is
auto-incremented if the auto-increment is enabled by reg $43.
<BR>Reads only return the 2nd byte and do not auto-increment.

<P>
