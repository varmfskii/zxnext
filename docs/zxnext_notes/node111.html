<!DOCTYPE HTML>

<!--Converted with LaTeX2HTML 2019 (Released January 1, 2019) -->
<HTML lang="EN">
<HEAD>
<TITLE>WAIT</TITLE>
<META NAME="description" CONTENT="WAIT">
<META NAME="keywords" CONTENT="zxnext_notes">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="viewport" CONTENT="width=device-width, initial-scale=1.0">
<META NAME="Generator" CONTENT="LaTeX2HTML v2019">

<LINK REL="STYLESHEET" HREF="zxnext_notes.css">

<LINK REL="next" HREF="node112.html">
<LINK REL="previous" HREF="node110.html">
<LINK REL="next" HREF="node112.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A
 HREF="node112.html">
<IMG WIDTH="37" HEIGHT="24" ALT="next" SRC="next.png"></A> 
<A
 HREF="node108.html">
<IMG WIDTH="26" HEIGHT="24" ALT="up" SRC="up.png"></A> 
<A
 HREF="node110.html">
<IMG WIDTH="63" HEIGHT="24" ALT="previous" SRC="prev.png"></A> 
<A ID="tex2html994"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALT="contents" SRC="contents.png"></A> 
<A ID="tex2html996"
  HREF="node184.html">
<IMG WIDTH="43" HEIGHT="24" ALT="index" SRC="index.png"></A> 
<BR>
<B> Next:</B> <A
 HREF="node112.html">Example</A>
<B> Up:</B> <A
 HREF="node108.html">Instructions</A>
<B> Previous:</B> <A
 HREF="node110.html">MOVE</A>
 &nbsp; <B>  <A ID="tex2html995"
  HREF="node1.html">Contents</A></B> 
 &nbsp; <B>  <A ID="tex2html997"
  HREF="node184.html">Index</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H4><A ID="SECTION00720030000000000000">
WAIT</A>
</H4>

<P>
WAIT executes in one dot clock. It performs a compare with the current
vertical line number and the current horizontal dot clock.

<P>
WAIT will hold until the current raster line matches the 9 bit value
stored in bits 8..0. When the line compare matches, WAIT will still
hold if the current horizontal dot clock is less than the value in
bits 14..9.

<P>
This compare logic means that out of order vertical line compares will
cause the COPPER to wait until the next video frame as the test is for
an exact match of the line number. The COPPER will continue to the
next instruction after an out of order horizontal pixel position
compare as the test checks for the current dot clock being greater
than or equal to the compare value.

<P>
WAIT will stop the COPPER when a compare is made against an out of
range vertical line or horizontal dot clock position as they will
never occur

<P>
A standard way to terminate a COPPER program is to wait for line 511
and horizontal position 63. This encodes into the instruction WORD
$FFFF.

<P>
The horizontal dot clock position compare includes an adjustment
meaning that the compare completes three dot clocks early in standard
<SPAN CLASS="MATH"><IMG STYLE="height: 1.90ex; vertical-align: -0.30ex; " SRC="img1.svg"
 ALT="$256\times 192$"></SPAN> resolution and two dot clocks early in Timex HIRES
<SPAN CLASS="MATH"><IMG STYLE="height: 1.90ex; vertical-align: -0.30ex; " SRC="img18.svg"
 ALT="$512\times192$"></SPAN> resolution. In practice, a pixel position can be
specified with clocks to spare to write a register value before the
pixel is displayed. This saves software having to auto-adjust
positions to arrive early. It also means that a wait for 0,0 can
affect the first pixel of the frame buffer before it is displayed and
set the scroll registers without visual artefacts.

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A
 HREF="node112.html">
<IMG WIDTH="37" HEIGHT="24" ALT="next" SRC="next.png"></A> 
<A
 HREF="node108.html">
<IMG WIDTH="26" HEIGHT="24" ALT="up" SRC="up.png"></A> 
<A
 HREF="node110.html">
<IMG WIDTH="63" HEIGHT="24" ALT="previous" SRC="prev.png"></A> 
<A ID="tex2html994"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALT="contents" SRC="contents.png"></A> 
<A ID="tex2html996"
  HREF="node184.html">
<IMG WIDTH="43" HEIGHT="24" ALT="index" SRC="index.png"></A> 
<BR>
<B> Next:</B> <A
 HREF="node112.html">Example</A>
<B> Up:</B> <A
 HREF="node108.html">Instructions</A>
<B> Previous:</B> <A
 HREF="node110.html">MOVE</A>
 &nbsp; <B>  <A ID="tex2html995"
  HREF="node1.html">Contents</A></B> 
 &nbsp; <B>  <A ID="tex2html997"
  HREF="node184.html">Index</A></B> </DIV>
<!--End of Navigation Panel-->

</BODY>
</HTML>
